<p id="notice"><%= notice %></p>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <div class="card shadow rounded-0 mt-5 mb-4">
        <div class="card-body">

          <div class="text-center">
            <%= image_tag "user-dummy.png", width: "150", class: "rounded-circle" %>
            <%#= image_tag @employee.profile_pic.url, width: "150", class: "rounded-circle" %>
          </div>

          <p>
            <strong>Name:</strong>
            <%= @employee.name %>
          </p>

          <p>
            <strong>Contact:</strong>
            <%= @employee.contact %>
          </p>

          <p>
            <strong>Date of birth:</strong>
            <%= @employee.date_of_birth %>
          </p>

          <p>
            <strong>Gender:</strong>
            <%= @employee.gender %>
          </p>

          <p>
            <strong>Marital status:</strong>
            <%= @employee.marital_status %>
          </p>

          <p>
            <strong>Email:</strong>
            <%= @employee.email %>
          </p>

          <p>
            <strong>Permanent address:</strong>
            <%= @employee.permanent_address %>
          </p>

          <p>
            <strong>Current address:</strong>
            <%= @employee.current_address %>
          </p>

          <p>
            <strong>City:</strong>
            <%= @employee.city %>
          </p>

          <p>
            <strong>State:</strong>
            <%= @employee.state %>
          </p>

          <p>
            <strong>Country:</strong>
            <%= @employee.country %>
          </p>

          <p>
            <strong>Nationality:</strong>
            <%= @employee.nationality %>
          </p>

          <p>
            <strong>Designation:</strong>
            <%= @employee.designation %>
          </p>

          <p>
            <strong>Date of joining:</strong>
            <%= @employee.date_of_joining %>
          </p>

          <p>
            <strong>Skype username:</strong>
            <%= @employee.skype_username %>
          </p>

          <p>
            <strong>Linkedin profile url:</strong>
            <%= @employee.linkedin_profile_url %>
          </p>

          <p>
            <strong>Github username:</strong>
            <%= @employee.github_username %>
          </p>

          <p>
            <strong>Aadhar uid:</strong>
            <%= @employee.aadhar_uid %>
          </p>

          <p>
            <strong>Pan uid:</strong>
            <%= @employee.pan_uid %>
          </p>

          <p>
            <strong>Job description:</strong>
            <%= @employee.job_description %>
          </p>
          <%= link_to 'Edit', edit_admin_employee_path(@employee),class: "btn btn-info rounded-0" %> |
          <%= link_to 'Back', admin_employees_path, class: "btn btn-secondary rounded-0" %>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card shadow rounded-0 mt-5 mb-4">
        <div class="card-body">
          <h5 class="text-muted font-weight-bold text-center">Employee Relatives</h5>
          <div id="accordion">
            <% @relatives.each do |relative| %>
              <div class="card mt-3 rounded-0">
                <div class="card-header">
                  <h5 data-toggle="collapse" href="#collapse_<%= relative.id %>" style="cursor: pointer;">
                    <%= relative.name %>
                  </h5>
                </div>
                <div id="collapse_<%= relative.id %>" class="collapse" data-parent="#accordion">
                  <div class="card-body">
                    <h6 class="font-weight-bold text-muted"><font class="text-dark">Relation:</font> <%= relative.relation %> </h6>
                    <h6 class="font-weight-bold text-muted"><font class="text-dark">Contact Number:</font> <%= relative.contact_number %> </h6>
                    <h6 class="font-weight-bold text-muted"><font class="text-dark">Address:</font> <%= relative.address %> </h6>
                  </div>
                </div>
              </div>
            <% end %>  
            <div class="mt-3">
              <%= link_to "Add Employee Relative", new_admin_relative_path(employee_id: @employee.id), class: "btn btn-primary shadow rounded-0" %>
            </div> 
          </div>   
        </div>
      </div>
      <div class="card shadow rounded-0 mt-5 mb-4">
        <div class="card-body">
          <h5 class="text-muted font-weight-bold text-center">Employee Education Credentials</h5>
          <div id="accordion">
            <% @education_credentials.each do |education_credential| %>
              <div class="card mt-3 rounded-0">
                <div class="card-header">
                  <h5 data-toggle="collapse" href="#collapse_<%= education_credential.id %>" style="cursor: pointer;">
                    <%= education_credential.course %>
                  </h5>
                </div>
                <div id="collapse_<%= education_credential.id %>" class="collapse" data-parent="#accordion">
                  <div class="card-body">
                    <h6 class="font-weight-bold text-muted"><font class="text-dark">Relation:</font> <%= education_credential.relation %> </h6>
                    <h6 class="font-weight-bold text-muted"><font class="text-dark">Contact Number:</font> <%= education_credential.contact_number %> </h6>
                    <h6 class="font-weight-bold text-muted"><font class="text-dark">Address:</font> <%= education_credential.address %> </h6>
                  </div>
                </div>
              </div>
            <% end %>  
            <div class="mt-3">
              <%= link_to "Add Employee Relative", new_admin_relative_path(employee_id: @employee.id), class: "btn btn-primary shadow rounded-0" %>
            </div> 
          </div>   
        </div>
      </div>
        <div class="card shadow rounded-0 mt-5 mb-4">
          <div class="card-body">
            <h5 class="text-muted font-weight-bold text-center">Employee References</h5>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <% @reference_people.each do |reference_people| %>
                  <tr>
                    <td><%= reference_people.name %></td>
                    <td><%= reference_people.email %></td>
                    <td>
                      <div class="btn-group">
                        <button type="button" class="btn btn-primary btn-sm">Actions</button>
                        <button 
                        type="button" 
                        class="btn btn-primary btn-sm dropdown-toggle dropdown-toggle-split"
                        id="dropdownMenuReference" 
                        data-toggle="dropdown" 
                        aria-haspopup="true" 
                        aria-expanded="false" 
                        data-reference="parent">
                          <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuReference">
                          <%= link_to "Show", admin_reference_person_path(reference_people, employee_id: @employee.id), class: "dropdown-item" %>
                          <%= link_to "Edit", edit_admin_reference_person_path(reference_people, employee_id: @employee.id), class: "dropdown-item" %>
                        </div>
                      </div>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
            <%= link_to "Add Employee References", new_admin_reference_person_path(employee_id: @employee.id), class: "btn btn-primary shadow rounded-0" %>
          </div>
        </div>
        <div class="card shadow rounded-0 mt-5 mb-4">
          <div class="card-body">
            <h5 class="text-muted font-weight-bold text-center">Employee References</h5>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Document Name</th>
                  <th>Document Type</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <% @documents.each do |document| %>
                  <tr>
                    <td><%= document.document_name %></td>
                    <td><%= document.document_type %></td>
                    <td>
                      <div class="btn-group">
                        <button type="button" class="btn btn-primary btn-sm">Actions</button>
                        <button 
                        type="button" 
                        class="btn btn-primary btn-sm dropdown-toggle dropdown-toggle-split"
                        id="dropdownMenuReference" 
                        data-toggle="dropdown" 
                        aria-haspopup="true" 
                        aria-expanded="false" 
                        data-reference="parent">
                          <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuReference">
                          <%= link_to "Show", admin_document_path(document, employee_id: @employee.id), class: "dropdown-item" %>
                          <%= link_to "Edit", edit_admin_document_path(document, employee_id: @employee.id), class: "dropdown-item" %>
                        </div>
                      </div>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
            <%= link_to "Add Employee Document", new_admin_document_path(employee_id: @employee.id), class: "btn btn-primary shadow rounded-0" %>
          </div>
        </div>
      </div>  
    </div>
  </div>
</div>

